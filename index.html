<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magyar GD Ranglista</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #050505;
            --bg-card: #151515;
            --bg-hover: #202020;
            --text-muted: #666666;
            --gold: #fec12a;
            --silver: #c0c0c0;
            --bronze: #cd7f32;
            
            --color-stars: #fec12a;
            --color-moons: #4d9be6;
            --color-diamonds: #00ffff;
            --color-coins: #c0c0c0;
            --color-demons: #ff4040;
            --color-creator: #cd853f;
            --color-levels: #00e676;
        }

        body {
            background: linear-gradient(135deg, #000000 0%, #111111 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            overflow-x: hidden;
            position: relative;
        }
        
        body.modal-open {
            overflow: hidden;
        }

        #bg-animation-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .falling-item {
            position: absolute;
            top: -10%;
            opacity: 0.2;
            animation: fall linear forwards;
        }

        .falling-item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.15; }
            90% { opacity: 0.15; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        .main-header {
            text-align: center;
            padding: 40px 0;
            color: var(--gold);
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 0 0 15px rgba(254, 193, 42, 0.3);
            animation: fadeIn 1s ease-in;
            position: relative;
            z-index: 2;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-menu {
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #333;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            position: relative;
            z-index: 2;
        }

        .nav-menu .nav-item {
            flex: 1;
            margin: 5px;
            min-width: 140px;
        }

        .nav-link {
            background: var(--bg-card);
            color: #ddd;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 15px 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .nav-link[data-category="stars"] { --theme-color: var(--color-stars); --text-on-active: black; }
        .nav-link[data-category="hun_levels"] { --theme-color: var(--color-levels); --text-on-active: black; }
        .nav-link[data-category="moons"] { --theme-color: var(--color-moons); --text-on-active: white; }
        .nav-link[data-category="diamonds"] { --theme-color: var(--color-diamonds); --text-on-active: black; }
        .nav-link[data-category="usercoins"] { --theme-color: var(--color-coins); --text-on-active: black; }
        .nav-link[data-category="demons"] { --theme-color: var(--color-demons); --text-on-active: white; }
        .nav-link[data-category="creator"] { --theme-color: var(--color-creator); --text-on-active: white; }

        .nav-link:hover {
            background: var(--bg-hover);
            border-color: var(--theme-color);
            color: var(--theme-color);
            transform: translateY(-5px);
        }

        .nav-link.active {
            background: var(--theme-color);
            color: var(--text-on-active);
            border-color: var(--theme-color);
            box-shadow: 0 0 20px var(--theme-color);
        }

        .icon-img {
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
            vertical-align: middle;
        }

        .nav-link .icon-img {
            width: 1.4rem;
            height: 1.4rem;
            margin-right: 8px;
        }

        .leaderboard-title .icon-img {
            width: 2.5rem;
            height: 2.5rem;
            margin-right: 15px;
        }

        .value-icon-img {
            width: 1.3rem;
            height: 1.3rem;
            margin-right: 6px;
            vertical-align: -3px;
        }

        .controls-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            position: relative;
            z-index: 2;
            flex-wrap: wrap;
        }
        
        .search-input {
            background: rgba(20, 20, 20, 0.6);
            border: 1px solid #444;
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            width: 100%;
            max-width: 400px;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(254, 193, 42, 0.2);
            background: rgba(30, 30, 30, 0.8);
        }

        .refresh-btn {
            background: rgba(20, 20, 20, 0.6);
            border: 1px solid #444;
            color: var(--gold);
            padding: 0 25px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(5px);
        }

        .refresh-btn:hover {
            background: rgba(254, 193, 42, 0.1);
            border-color: var(--gold);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(254, 193, 42, 0.1);
        }

        .refresh-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .refresh-btn i {
            transition: transform 0.5s ease;
        }

        .refresh-btn:hover i {
            transform: rotate(180deg);
        }

        .leaderboard-container {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid #333;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            position: relative;
            z-index: 2;
        }

        #stars { --section-color: var(--color-stars); }
        #hun_levels { --section-color: var(--color-levels); }
        #moons { --section-color: var(--color-moons); }
        #diamonds { --section-color: var(--color-diamonds); }
        #usercoins { --section-color: var(--color-coins); }
        #demons { --section-color: var(--color-demons); }
        #creator { --section-color: var(--color-creator); }

        .leaderboard-title {
            text-align: center;
            color: var(--section-color);
            font-size: 2rem;
            margin-bottom: 30px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .player-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-bottom: 15px;
            min-height: 200px;
        }

        @media (max-width: 1200px) { .player-grid { grid-template-columns: repeat(4, 1fr); } }
        @media (max-width: 992px) { .player-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 768px) { .player-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 576px) { .player-grid { grid-template-columns: 1fr; } }

        .player-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
            border: 1px solid #333;
            animation: slideIn 0.5s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .level-card-content {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }
        
        .level-details {
            overflow: hidden;
        }

        .level-name {
            font-weight: bold;
            color: white;
            font-size: 1.05rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .level-creator {
            color: var(--gold);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .level-id-chip {
            background: rgba(255,255,255,0.1);
            border: 1px solid #444;
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 0.75rem;
            color: #aaa;
            margin-top: auto;
            text-align: center;
            font-family: monospace;
        }

        .card-badges {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            flex-direction: row-reverse; 
            gap: 5px;
            z-index: 10;
        }

        .badge-icon {
            width: 22px;
            height: 22px;
            object-fit: contain;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.8));
            transition: transform 0.2s;
        }
        
        .badge-icon:hover {
            transform: scale(1.2);
        }

        .modal-badge {
            width: 28px;
            height: 28px;
            object-fit: contain;
            margin-left: 10px;
            vertical-align: middle;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.2));
        }

        /* --- PAGINATION STYLES --- */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--color-levels);
        }
        .page-btn {
            background: rgba(20,20,20,0.8);
            border: 1px solid #444;
            color: white;
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .page-btn:hover:not(:disabled) {
            background: var(--color-levels);
            color: black;
            border-color: var(--color-levels);
        }
        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        /* ------------------------- */

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .player-card:hover {
            background: var(--bg-hover);
            transform: scale(1.05);
            border-color: var(--section-color);
            z-index: 2;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }

        .player-card.top-three {
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border: 1px solid var(--section-color);
        }

        .player-card.top-three:hover { box-shadow: 0 0 20px var(--section-color); }

        .player-rank {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 5px;
            font-weight: bold;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .trophy-icon { font-size: 1.2rem; }
        .rank-1 .trophy-icon { color: var(--gold); }
        .rank-2 .trophy-icon { color: var(--silver); }
        .rank-3 .trophy-icon { color: var(--bronze); }

        .player-name {
            font-size: 1.1rem;
            color: var(--section-color);
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 130px;
        }

        .player-value {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #ddd;
            font-weight: 600;
            background: rgba(0,0,0,0.3);
            padding: 5px 10px;
            border-radius: 5px;
        }

        .category-section { display: none; }
        .category-section.active { display: block; animation: fadeIn 0.5s ease; }
        
        .loading-container {
            text-align: center;
            color: #888;
            padding: 40px;
            font-style: italic;
            display: none;
        }
        .loading-container i { margin-right: 10px; animation: spin 1s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .error-msg {
            grid-column: 1/-1;
            text-align: center;
            padding: 20px;
            color: #ff5555;
            background: rgba(255,0,0,0.1);
            border-radius: 10px;
            border: 1px solid #ff5555;
        }
        .retry-btn {
            background: #333;
            color: white;
            border: 1px solid #555;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        .retry-btn:hover { 
            background: #444; 
        }
        
        .player-skin {
            width: 40px;
            height: 40px;
            object-fit: contain;
            margin-right: 8px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
        }
      
        .main-footer {
            background: rgba(20, 20, 20, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid #333;
            padding: 40px 0;
            margin-top: 60px;
            text-align: center;
            color: #888;
            font-size: 0.95rem;
            position: relative;
            z-index: 2;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
        }

        .footer-credits {
            margin-bottom: 12px;
            color: #e0e0e0;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .footer-name {
            color: var(--gold);
            font-weight: bold;
        }

        .footer-disclaimer {
            font-size: 0.85rem;
            color: #666;
        }

        .footer-link {
            color: #aaa;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-link:hover {
            color: var(--gold);
            text-shadow: 0 0 10px rgba(254, 193, 42, 0.3);
        }

        /* --- MODÁLIS ABLAK STÍLUSOK --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(8px);
            animation: fadeInModal 0.3s ease;
        }

        @keyframes fadeInModal {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
            border: 2px solid #333;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,0.7);
            animation: slideUpModal 0.4s ease;
        }

        @keyframes slideUpModal {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            color: #888;
            cursor: pointer;
            transition: color 0.3s;
            z-index: 100;
        }
        .close-modal:hover { color: var(--gold); }

        .modal-header-user {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            border-bottom: 1px solid #333;
            padding-bottom: 20px;
        }

        .modal-main-icon {
            width: 80px;
            height: 80px;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.2));
        }

        .modal-username {
            font-size: 2rem;
            font-weight: bold;
            color: var(--gold);
            margin: 0;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }

        .modal-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .modal-stat-item {
            background: rgba(255,255,255,0.05);
            padding: 10px 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            font-weight: 600;
            border: 1px solid #333;
        }

        .modal-icons-container {
            margin-bottom: 30px;
        }
        .modal-subtitle {
            color: #aaa;
            margin-bottom: 15px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .icon-set-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
        }
        .icon-set-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .icon-set-item img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5));
            transition: transform 0.3s;
        }
        .icon-set-item img:hover { transform: scale(1.1); }
        .icon-label {
            font-size: 0.7rem;
            color: #666;
            margin-top: 5px;
        }

        .modal-socials {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .social-link {
            display: inline-block;
            transition: transform 0.3s;
        }
        .social-link:hover { transform: translateY(-5px); }
        .social-icon-img {
            width: 40px;
            height: 40px;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5));
        }

        .modal-content::-webkit-scrollbar { width: 8px; }
        .modal-content::-webkit-scrollbar-track { background: #111; border-radius: 10px; }
        .modal-content::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }
        .modal-content::-webkit-scrollbar-thumb:hover { background: var(--gold); }

    </style>
</head>
<body>
    <div id="bg-animation-container"></div>

    <div class="container">
        <h1 class="main-header"></h1>

        <nav class="nav-menu">
            <div class="d-flex flex-wrap justify-content-center">
                <div class="nav-item">
                    <a href="#" class="nav-link active" data-category="stars">
                        <img src="src/star.png" class="icon-img" alt="Stars"> Stars
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-category="moons">
                        <img src="src/moon.png" class="icon-img" alt="Moons"> Moons
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-category="diamonds">
                        <img src="src/diamond.png" class="icon-img" alt="Diamonds"> Diamonds
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-category="usercoins">
                        <img src="src/silvercoin.png" class="icon-img" alt="User Coins"> User Coins
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-category="demons">
                        <img src="src/demon-hard.png" class="icon-img" alt="Demons"> Demons
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-category="creator">
                        <img src="src/creator_points.png" class="icon-img" alt="Creator Points"> Creator Points
                    </a>
                </div>
                  <div class="nav-item">
                    <a href="#" class="nav-link" data-category="hun_levels">
                        <img src="src/safe.png" class="icon-img" alt="Hun Levels">Rated Levels
                    </a>
                </div>
            </div>
        </nav>

        <div class="controls-container">
            <input type="text" id="player-search" class="search-input" placeholder="Keresés...">
            <button id="force-refresh" class="refresh-btn" onclick="forceRefresh()">
                <i class="fas fa-sync-alt"></i> Adatok frissítése
            </button>
        </div>

        <div class="leaderboard-container">
            
            <div class="category-section active" id="stars">
                <div class="loading-container" id="loading-stars">
                    <i class="fas fa-circle-notch"></i> 
                </div>
                <div class="player-grid" id="grid-stars"></div>
            </div>

            <div class="category-section" id="hun_levels">
                
                <div class="pagination-container" id="pagination-top">
                    <button class="page-btn" id="prev-page-top"><i class="fas fa-chevron-left"></i> Előző</button>
                    <span id="page-indicator-top">1 / 1</span>
                    <button class="page-btn" id="next-page-top">Következő <i class="fas fa-chevron-right"></i></button>
                </div>

                <div class="player-grid" id="grid-hun_levels"></div>

                <div class="pagination-container" id="pagination-bottom" style="margin-top: 20px; margin-bottom: 0;">
                    <button class="page-btn" id="prev-page-bottom"><i class="fas fa-chevron-left"></i> Előző</button>
                    <span id="page-indicator-bottom">1 / 1</span>
                    <button class="page-btn" id="next-page-bottom">Következő <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <div class="category-section" id="moons">
                <div class="loading-container" id="loading-moons">
                    <i class="fas fa-circle-notch"></i> Adatok betöltése...
                </div>
                <div class="player-grid" id="grid-moons"></div>
            </div>

            <div class="category-section" id="diamonds">
                <div class="loading-container" id="loading-diamonds">
                    <i class="fas fa-circle-notch"></i> Adatok betöltése...
                </div>
                <div class="player-grid" id="grid-diamonds"></div>
            </div>

            <div class="category-section" id="usercoins">
                <div class="loading-container" id="loading-usercoins">
                    <i class="fas fa-circle-notch"></i> Adatok betöltése...
                </div>
                <div class="player-grid" id="grid-usercoins"></div>
            </div>

            <div class="category-section" id="demons">
                <div class="loading-container" id="loading-demons">
                    <i class="fas fa-circle-notch"></i> Adatok betöltése...
                </div>
                
                <div class="player-grid" id="grid-demons"></div>
            </div>

            <div class="category-section" id="creator">
                <div class="loading-container" id="loading-creator">
                    <i class="fas fa-circle-notch"></i> Adatok betöltése...
                </div>
                <div class="player-grid" id="grid-creator"></div>
            </div>

        </div>
    </div>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-credits">
                Tervezés és Dizájn: <span class="footer-name">trexhun</span> <span style="margin: 0 10px; color: #444;">|</span> Fejlesztette: <span class="footer-name">TomYx</span>
            </div>
            <div class="footer-disclaimer" style="margin-top: 5px; opacity: 0.7; font-size: 0.8rem;">
                Game assets and sprites belong to <a href="https://www.robtopgames.com/" target="_blank" class="footer-link"><strong>RobTop Games</strong></a>.
            </div>
            <div class="footer-disclaimer" style="margin-top: 8px;">
                Data provided by <a href="https://gdbrowser.com/" target="_blank" class="footer-link">GDBrowser</a> (by GDColon).
            </div>
        </div>
    </footer>

    <div id="profile-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-body">
                </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
const RAW_PLAYERS = [
    "trexhun", "Leviax", "BlasterLizard", "Krisz", "Andras9912", "KMJFIRE", "AlexayMarton", 
    "kreno", "TrickyBonkers", "IlIIlllIlIlI", "GgDashie", "arkwada", "Szilu", "mag", 
    "ItzVmark", "Zsombi", "NotDarpy", "vcss", "gBen", "capaxl", "kri5z", "DiceXD3", 
    "Airaga", "64x", "AceandBlast", "SuBZeRO555", "Somniare", "Bendzsu89", "bodza", 
    "Leves", "Gaaboor", "Lorserix", "DARTSY1", "TheTrueRdam", "BLASTAHGD", "KZD78", 
    "GrandpaTom", "AppleIdkPen", "LeverEnd", "TinyMapCreator", "neitie", "MechanicGD", 
    "Keselowski2", "Massck", "7riPlays", "Ephyaltes", "Valkai123", "KeCsan01", "tonkesz11", 
    "Beatyoco", "Zodacx", "MZeno07", "aTsukiakari", "szebo210", "N1mr0d", "nebulatic", 
    "Gouldberg", "Solerix", "Avlaboba", "m3ndel", "Teddyx", "LenjoyGD", "Pongix", 
    "PepsiBong", "punor", "zBiscuit", "JocX", "adniW", "malvin166", "DrakeX5", "TRraim", 
    "RazorGMD11", "oniel1117", "CringeLord GD", "PulseN1nja", "BenikeGamer", "PetiGyerek", 
    "Migam8", "nytroW", "Palinka", "Galaxygamer1m1", "kovigregi", "semi42", "AdamTheGreat02", 
    "Interferent", "6almas5let", "averiee", "macoh", "Nevgelen", "Teyyo", "lalimatyuss", 
    "Goxikolid", "zZiizZy", "VRTGq", "9767", "Pigys", "whoiskeve", "garlicisbald", 
    "Phan7xm", "krisztianw", "Frixnipe", "Firelia", "apeti", "Csavesz", "Daewe", 
    "DaeweDash", "MarkiXonGD", "matyi0", "Gerimatod", "O10one", "gergo123456", "chirpie", 
    "kaministorm", "wMixy", "Serpentical", "Shyze", "ShiveringStars0", "pPaarketta", "Morzsika",
    "Libakoptato", "Kisgrofo", "kacsloz", "GDWaterGMD", "BVviktor", "Bandi006", "BaloghRicsi",
    "Balint1117", "AtiDaNub", "rolidemuth"
];

const HUNGARIAN_LEVELS_UNSORTED = [
    { name: "colorful born", id: "11640836", creator: "Palinka" },
    { name: "Spectrum Drop", id: "13792093", creator: "Palinka" },
    { name: "Unknown seas", id: "25711231", creator: "capaxl" },
    { name: "Skylake", id: "28940538", creator: "Palinka" },
    { name: "Disoriented", id: "54488483", creator: "krisz" },
    { name: "D y s a n i a", id: "57567541", creator: "krisz" },
    { name: "laguna", id: "55922858", creator: "Szilu" },
    { name: "Jeff", id: "55145261", creator: "Szilu" },
    { name: "Aether", id: "58658447", creator: "Szilu" },
    { name: "pasta", id: "58976047", creator: "Szilu" },
    { name: "Reigning Power", id: "56923112", creator: "Lorserix" },
    { name: "Kuki", id: "60215264", creator: "Szilu" },
    { name: "Superiority", id: "60415539", creator: "Lorserix" },
    { name: "sunder", id: "60765811", creator: "Szilu" },
    { name: "Parallaxis", id: "60973537", creator: "krisz" },
    { name: "Funkey", id: "61792084", creator: "krisz" },
    { name: "Machinery", id: "61792235", creator: "Lorserix" },
    { name: "jumiper", id: "60674995", creator: "Pongix" },
    { name: "Octarine", id: "62294737", creator: "Szilu" },
    { name: "Antiquity", id: "62537732", creator: "Lorserix" },
    { name: "Swwft", id: "62702124", creator: "Lorserix" },
    { name: "Flashbreaker", id: "56934502", creator: "capaxl" },
    { name: "Bright rush", id: "60940989", creator: "capaxl" },
    { name: "Citrom", id: "63445515", creator: "Lorserix" },
    { name: "FluNk", id: "63713427", creator: "Pongix" },
    { name: "Swamp of Swans", id: "63741773", creator: "Lorserix" },
    { name: "Wait For Me", id: "63852841", creator: "krisz" },
    { name: "BobTop", id: "64030931", creator: "Szilu" },
    { name: "True Fire", id: "64228495", creator: "Lorserix" },
    { name: "bitter", id: "64860179", creator: "Szilu" },
    { name: "kofola", id: "65048683", creator: "Szilu" },
    { name: "Fancy", id: "65546984", creator: "Lorserix" },
    { name: "very rainy level", id: "65639557", creator: "Szilu" },
    { name: "Pongix AdveNtures", id: "66538981", creator: "Pongix" },
    { name: "this is the track", id: "66682928", creator: "Pongix" },
    { name: "Hiver", id: "66717823", creator: "macoh" },
    { name: "snov", id: "66010642", creator: "krenogd" },
    { name: "Franchise", id: "67420165", creator: "krisz" },
    { name: "jumpIger", id: "67475773", creator: "Pongix" },
    { name: "Sparky", id: "67228346", creator: "Lorserix" },
    { name: "woOoO", id: "68131349", creator: "Zodacx" },
    { name: "glitcherer", id: "69223432", creator: "Szilu" },
    { name: "heLvan", id: "69052219", creator: "Pongix" },
    { name: "Blessing", id: "72710298", creator: "krisz" },
    { name: "Plump it up", id: "72413015", creator: "Pongix" },
    { name: "bHjflBrhObvgrHu", id: "72828395", creator: "krenogd" },
    { name: "make it", id: "68350875", creator: "macoh" },
    { name: "gYnter", id: "68286312", creator: "Pongix" },
    { name: "10HEX", id: "75199399", creator: "krenogd" },
    { name: "Despicable XX", id: "76142451", creator: "VRTGq" },
    { name: "Radioactive", id: "76260506", creator: "64x" },
    { name: "be gawne", id: "77312976", creator: "Szilu" },
    { name: "Ethereum", id: "77467098", creator: "krisz" },
    { name: "Final Battle", id: "8611862", creator: "Palinka" },
    { name: "Beautiful Dimension", id: "10058879", creator: "Palinka" },
    { name: "Sytrus", id: "9547559", creator: "Palinka" },
    { name: "HOME", id: "78367764", creator: "Migam8" },
    { name: "Resurgence", id: "78444747", creator: "Leviax" },
    { name: "Kalubinabi", id: "78489458", creator: "Pongix" },
    { name: "Glow Up", id: "79201271", creator: "Interferent" },
    { name: "Midnight", id: "79904901", creator: "64x" },
    { name: "Sakupen Circles", id: "79178142", creator: "krenogd" },
    { name: "64X ADVENTURES", id: "80011704", creator: "64x" },
    { name: "Nunri", id: "81107735", creator: "Szilu" },
    { name: "1HEX", id: "81880832", creator: "krenogd" },
    { name: "MEADOW", id: "82476291", creator: "krenogd" },
    { name: "fjWhfHeNmwj", id: "83673983", creator: "krenogd" },
    { name: "GW Hungary", id: "83236821", creator: "krenogd" },
    { name: "ThumpGrinder", id: "83434113", creator: "64x" },
    { name: "YOU GOTTA", id: "84355265", creator: "KMJFIRE" },
    { name: "REPETITION", id: "82367599", creator: "KMJFIRE" },
    { name: "KRENO DEFAULT MAP", id: "85552127", creator: "krenogd" },
    { name: "Fructus Seperatus", id: "85171538", creator: "ItzVmark" },
    { name: "HIDEAWAYYY", id: "85549357", creator: "KMJFIRE" },
    { name: "Astral Prism", id: "85624519", creator: "Szilu" },
    { name: "TouchDown", id: "86237239", creator: "Lorserix" },
    { name: "sorrov snovstorm", id: "86998656", creator: "krenogd" },
    { name: "Nokedlis Csirke", id: "86893952", creator: "krenogd" },
    { name: "VIRTUE", id: "87338911", creator: "krenogd" },
    { name: "POTENTIAL", id: "87550411", creator: "KMJFIRE" },
    { name: "Argentum", id: "68351414", creator: "Lorserix" },
    { name: "turbulence", id: "69097068", creator: "Szilu" },
    { name: "GANGIMARI", id: "85698971", creator: "64x" },
    { name: "Blue Drift", id: "87640664", creator: "Szilu" },
    { name: "KYOSHI", id: "88000913", creator: "KMJFIRE" },
    { name: "Reminiscence", id: "89041620", creator: "krenogd" },
    { name: "Rohadt Eletbe", id: "89171482", creator: "Szilu" },
    { name: "FLARELIGHTS", id: "89301259", creator: "KMJFIRE" },
    { name: "SGR 1806 20", id: "89081606", creator: "CringeLord GD" },
    { name: "CATAPULT", id: "89833134", creator: "krenogd" },
    { name: "WARNING ZONE", id: "89825940", creator: "KMJFIRE" },
    { name: "snovy landscape", id: "90172661", creator: "krenogd" },
    { name: "System", id: "88673149", creator: "Frixnipe" },
    { name: "FISH FISH GODMODE", id: "89807521", creator: "whoiskeve" },
    { name: "PUKIFING", id: "90213067", creator: "Szilu" },
    { name: "DIMOUT", id: "89577199", creator: "whoiskeve" },
    { name: "ZENIUXHASNOEYEBROWS", id: "90612222", creator: "KMJFIRE" },
    { name: "INNER CELL", id: "90888140", creator: "krenogd" },
    { name: "CringeStep", id: "90523485", creator: "CringeLord GD" },
    { name: "pupu", id: "90960310", creator: "Szilu" },
    { name: "UNCONDITIONAL", id: "91228641", creator: "krenogd" },
    { name: "Northern Sector", id: "90742274", creator: "krenogd" },
    { name: "THEARMYANTS", id: "91440624", creator: "KMJFIRE" },
    { name: "EFEU", id: "90267991", creator: "krenogd" },
    { name: "105 TIMETRAVL", id: "91974787", creator: "KMJFIRE" },
    { name: "LIE 2 ME", id: "91920373", creator: "KMJFIRE" },
    { name: "BREAKAWAY", id: "91967003", creator: "KMJFIRE" },
    { name: "Space Drifter", id: "92306694", creator: "krenogd" },
    { name: "open water", id: "92292854", creator: "krenogd" },
    { name: "Striker 2019", id: "91929602", creator: "krenogd" },
    { name: "Friendly", id: "92445166", creator: "krenogd" },
    { name: "BLOWLAND", id: "92715710", creator: "krenogd" },
    { name: "Aerodeck", id: "92752932", creator: "64x" },
    { name: "ELEVATE", id: "92276415", creator: "64x" },
    { name: "CITY", id: "93076605", creator: "KMJFIRE" },
    { name: "Haha Yippie", id: "93083895", creator: "krenogd" },
    { name: "KMJFIRE SIMPLE MAP", id: "93022408", creator: "KMJFIRE" },
    { name: "Hot Air", id: "93382584", creator: "64x" },
    { name: "SHIMMER", id: "93329363", creator: "KMJFIRE" },
    { name: "Polestar", id: "93580357", creator: "64x" },
    { name: "Glooming Burg", id: "93659978", creator: "Szilu" },
    { name: "Sherbet Sky", id: "93751864", creator: "64x" },
    { name: "ElectroBonkers", id: "93761830", creator: "TrickyBonkers" },
    { name: "Wacky McWhackface v2", id: "93019675", creator: "Szilu" },
    { name: "Nincs", id: "94057157", creator: "krenogd" },
    { name: "Subterranean Plant", id: "94116045", creator: "Szilu" },
    { name: "Heavy Cash", id: "94378236", creator: "Szilu" },
    { name: "Where Roads End", id: "94305588", creator: "64x" },
    { name: "Freezer", id: "94635913", creator: "Szilu" },
    { name: "supermode", id: "93958258", creator: "Daewe" },
    { name: "Arboretum", id: "94937722", creator: "64x" },
    { name: "Orgovany", id: "94969955", creator: "krenogd" },
    { name: "OVERCAST", id: "94841429", creator: "KMJFIRE" },
    { name: "Reedswamp", id: "95383756", creator: "64x" },
    { name: "Space Drifter II", id: "94713619", creator: "krenogd" },
    { name: "FALL WITH ME", id: "95727598", creator: "KMJFIRE" },
    { name: "Instinct", id: "96001777", creator: "krenogd" },
    { name: "rumumu", id: "94883295", creator: "Szilu" },
    { name: "BYPASS", id: "96187595", creator: "krenogd" },
    { name: "vulg", id: "96238040", creator: "Szilu" },
    { name: "nebular", id: "96504286", creator: "Szilu" },
    { name: "Epilouge", id: "96752458", creator: "Szilu" },
    { name: "Broken side", id: "96919956", creator: "NotDarpy" },
    { name: "mad bug", id: "96340087", creator: "krenogd" },
    { name: "Lyeg", id: "97155541", creator: "krenog" },
    { name: "Change", id: "94950277", creator: "NotDarpy" },
    { name: "Vivid memories", id: "96358359", creator: "NotDarpy" },
    { name: "concrete basin", id: "97452274", creator: "64x" },
    { name: "BLUR", id: "96410452", creator: "64x" },
    { name: "Ruined Tower", id: "97832190", creator: "BLASTAHGD" },
    { name: "Prologue", id: "97945595", creator: "Szilu" },
    { name: "Retro Space", id: "97787790", creator: "Pongix" },
    { name: "SNOWBOWL", id: "98070635", creator: "KMJFIRE" },
    { name: "Farewell", id: "98434290", creator: "BLASTAHGD" },
    { name: "Torn", id: "99607760", creator: "Szilu" },
    { name: "All i had", id: "99520426", creator: "NotDarpy" },
    { name: "I feel colorous", id: "89406811", creator: "krenogd" },
    { name: "HILLS", id: "96884529", creator: "KMJFIRE" },
    { name: "SIXTEEN", id: "100784500", creator: "KMJFIRE" },
    { name: "vivid daydream", id: "101934329", creator: "krenogd" },
    { name: "BMPmap", id: "99986024", creator: "9767" },
    { name: "Glowy Glowstorm", id: "102178139", creator: "Szilu" },
    { name: "HYPOTHETICAL", id: "102781083", creator: "KMJFIRE" },
    { name: "cube", id: "102921449", creator: "Pongix" },
    { name: "dBghFuhfBeuR", id: "93956657", creator: "krenogd" },
    { name: "umumur by", id: "103461927", creator: "Szilu" },
    { name: "mimosa", id: "103501269", creator: "by 64x" },
    { name: "i wish to be kreno", id: "103323134", creator: "krenogd" },
    { name: "right", id: "104098064", creator: "krenogd" },
    { name: "255 forint", id: "102954127", creator: "trexhun" },
    { name: "Voculized", id: "104172811", creator: "gBen" },
    { name: "station", id: "104187729", creator: "krenogd" },
    { name: "LAREA", id: "100037627", creator: "Daewe" },
    { name: "CLOUD CITY", id: "104439419", creator: "KMJFIRE" },
    { name: "Gravity Glide", id: "105050528", creator: "btwmag" },
    { name: "Ascension", id: "103265381", creator: "Frixnipe" },
    { name: "Elevating Elevator", id: "105005297", creator: "NotDarpy" },
    { name: "slinky", id: "105480279", creator: "krenogd" },
    { name: "Vaulted Heights", id: "105608980", creator: "btwmag" },
    { name: "DOWNTOWN", id: "105922898", creator: "KMJFIRE" },
    { name: "UPPIES", id: "106226014", creator: "btwmag" },
    { name: "Deserted Dunes", id: "106509446", creator: "krenogd" },
    { name: "paper flyer", id: "106578473", creator: "krenogd" },
    { name: "FLAMETHROWER", id: "106588541", creator: "krenogd" },
    { name: "rime ice desert", id: "106833389", creator: "64x" },
    { name: "limit", id: "106896121", creator: "krenogd" },
    { name: "flower field", id: "107010343", creator: "krenogd" },
    { name: "CLING", id: "107176342", creator: "btwmag" },
    { name: "Small Venture", id: "101937906", creator: "garlicisbald" },
    { name: "champagne", id: "107440260", creator: "64x" },
    { name: "la naither", id: "107401997", creator: "Szilu" },
    { name: "ARID", id: "107412405", creator: "KMJFIRE" },
    { name: "ECHOING SANDS", id: "90876323", creator: "64x" },
    { name: "Jumpy Jungel", id: "107561067", creator: "NotDarpy" },
    { name: "arch", id: "107842068", creator: "64x" },
    { name: "Rules", id: "97575899", creator: "NotDarpy" },
    { name: "Flipbreak", id: "107847446", creator: "btwmag" },
    { name: "KILL THE LIGHTS", id: "108163433", creator: "krenogd" },
    { name: "jumbo shrimp", id: "108525340", creator: "krenogd" },
    { name: "Miskolc", id: "108374637", creator: "gBen" },
    { name: "upwards", id: "108687228", creator: "krenogd" },
    { name: "BITTERSWEET", id: "108745134", creator: "KMJFIRE" },
    { name: "loveyoulessloveyoule", id: "108783618", creator: "VRTGq" },
    { name: "SleekTrials", id: "98070422", creator: "btwmag" },
    { name: "tombola", id: "108777485", creator: "trexhun" },
    { name: "Operation EVOLUTION", id: "108570682", creator: "Pongix" },
    { name: "dusk to dawn", id: "109566554", creator: "krenogd" },
    { name: "Savage", id: "109539965", creator: "NotDarpy" },
    { name: "Sandy Springs", id: "109589714", creator: "btwmag" },
    { name: "WALKWAY", id: "109735355", creator: "KMJFIRE" },
    { name: "Final Impact", id: "109748007", creator: "btwmag" },
    { name: "Aphotic", id: "109915836", creator: "Szilu" },
    { name: "dirt road", id: "109951281", creator: "64x" },
    { name: "ANTICIPATION", id: "110051475", creator: "KMJFIRE" },
    { name: "DJ BABY BENZ", id: "110268124", creator: "btwmag" },
    { name: "Yonder Sky Temple", id: "110360378", creator: "btwmag" },
    { name: "Swoopfield", id: "110452453", creator: "btwmag" },
    { name: "Dormant", id: "83543340", creator: "64x" },
    { name: "scorpion", id: "110774148", creator: "64x" },
    { name: "PERIHELION", id: "110881425", creator: "krenogd" },
    { name: "Desolate District", id: "110979458", creator: "btwmag" },
    { name: "Fading In", id: "110701202", creator: "garlicisbald" },
    { name: "Christmas Eve", id: "97931111", creator: "krisztianw" },
    { name: "Obselete", id: "111176564", creator: "Szilu" },
    { name: "Rythion", id: "88290385", creator: "CringeLord GD" },
    { name: "Budapest", id: "111248738", creator: "gBen" },
    { name: "selaphobia", id: "111249494", creator: "Pongix" },
    { name: "hungarikum", id: "111294342", creator: "trexhun" },
    { name: "signal", id: "111424728", creator: "krenogd" },
    { name: "100HEX", id: "96996017", creator: "krenogd" },
    { name: "Flipside Skyline", id: "111321868", creator: "btwmag" },
    { name: "late night walk", id: "111613717", creator: "Pongix" },
    { name: "15 darab szint", id: "111626765", creator: "krenogd" },
    { name: "Slips", id: "111785439", creator: "Szilu" },
    { name: "khalifa", id: "111935388", creator: "64x" },
    { name: "KMJFIRE BY KMJFIRE", id: "111943441", creator: "KMJFIRE" },
    { name: "FOREVER", id: "112025935", creator: "KMJFIRE" },
    { name: "NIGHTSCAPE", id: "112079491", creator: "KMJFIRE" },
    { name: "Rakott krumpli", id: "104172646", creator: "trexhun" },
    { name: "Stimmungsbilder", id: "112119035", creator: "Szilu" },
    { name: "realm", id: "112215178", creator: "krenogd" },
    { name: "Cloid", id: "94937825", creator: "Pongix" },
    { name: "NRG", id: "112344749", creator: "btwmag" },
    { name: "DXRK BLUE", id: "80798994", creator: "64x" },
    { name: "szilulu", id: "112578044", creator: "krenogd" },
    { name: "krenono", id: "112578043", creator: "Szilu" },
    { name: "diffract", id: "109516939", creator: "krenogd" },
    { name: "Oramel Carange", id: "108536076", creator: "Szilu" },
    { name: "snovglobe", id: "112832022", creator: "krenogd" },
    { name: "sznov by", id: "112751178", creator: "Szilu" },
    { name: "Anticlimax", id: "112488957", creator: "NotDarpy" },
    { name: "yep2025", id: "113654010", creator: "Szilu" },
    { name: "stroll", id: "113462340", creator: "krenogd" },
    { name: "GRIDLOCK MACHINE", id: "113572545", creator: "btwmag" },
    { name: "GLITTER", id: "114151888", creator: "KMJFIRE" },
    { name: "GREENHOUSE ZERO", id: "114251606", creator: "btwmag" },
    { name: "heyyeh", id: "110613015", creator: "Szilu" },
    { name: "EDGERUNNER", id: "113672255", creator: "KMJFIRE" },
    { name: "HSTORMHASNOMAIDENS", id: "94296909", creator: "KMJFIRE" },
    { name: "von altfrau", id: "114605082", creator: "Szilu" },
    { name: "Belial", id: "111799025", creator: "NotDarpy" },
    { name: "minden rendben", id: "114882183", creator: "trexhun" },
    { name: "Xupar", id: "114714146", creator: "Daewe" },
    { name: "SEVENTEEN", id: "115070574", creator: "KMJFIRE" },
    { name: "Dashing Speed", id: "115451587", creator: "NotDarpy" },
    { name: "Marquee", id: "115582977", creator: "btwmag" },
    { name: "Kreno Kaizo I", id: "115678378", creator: "krenogd" },
    { name: "egy hideg este", id: "115787473", creator: "trexhun" },
    { name: "allure", id: "115825602", creator: "Pigys" },
    { name: "Space Drifter iv", id: "116009035", creator: "Szilu" },
    { name: "Spraypaint", id: "116110332", creator: "btwmag" },
    { name: "Drift or Die", id: "114847662", creator: "Pigys" },
    { name: "Seal", id: "116618790", creator: "Szilu" },
    { name: "Pass By", id: "116387913", creator: "NotDarpy" },
    { name: "ROBTOP DROP", id: "116808488", creator: "KMJFIRE" },
    { name: "hard map", id: "117507843", creator: "Szilu" },
    { name: "Stellux", id: "113282836", creator: "gBen" },
    { name: "lebbencs leves", id: "117781836", creator: "trexhun" },
    { name: "sleeping city", id: "118284440", creator: "krenogd" },
    { name: "Backyard egg hunt", id: "103417219", creator: "Gerimatod" },
    { name: "Turtlefuzz", id: "118595185", creator: "Szilu" },
    { name: "INDEXERROR", id: "118246516", creator: "KMJFIRE" },
    { name: "HI TWIXIN", id: "117372340", creator: "KMJFIRE" },
    { name: "Zinnias", id: "118664283", creator: "btwmag" },
    { name: "Irodansu", id: "118291861", creator: "NotDarpy" },
    { name: "VENUS FLY TRAP", id: "116186742", creator: "KMJFIRE" },
    { name: "ne add fel", id: "118531509", creator: "trexhun" },
    { name: "cellulose", id: "116770383", creator: "Daewe" },
    { name: "Pale Visions", id: "115102215", creator: "NotDarpy" },
    { name: "serenity", id: "117081000", creator: "btwmag" },
    { name: "Gyor by", id: "119592149", creator: "gBen" },
    { name: "drift", id: "119573740", creator: "krenogd" },
    { name: "Strange Springs", id: "119885732", creator: "NotDarpy" },
    { name: "ESCHATON", id: "120104218", creator: "KMJFIRE" },
    { name: "adventure of light", id: "86803784", creator: "capaxl" },
    { name: "elveszve valahol", id: "120368532", creator: "trexhun" },
    { name: "53 Frost blh", id: "120278613", creator: "krenogd" },
    { name: "Voidpath", id: "121682682", creator: "Phan7xm" },
    { name: "Revo", id: "121682682", creator: "NotDarpy" },
    { name: "semmi sem ugyanaz", id: "122011251", creator: "trexhun" },
    { name: "GRN", id: "111076996", creator: "64x" },
    { name: "Enigma", id: "110028704", creator: "64x" },
    { name: "a walk in the park", id: "123332659", creator: "krenogd" },
    { name: "DRILL DIG", id: "123314092", creator: "btwmag" },
    { name: "Music level", id: "123498258", creator: "Szilu" },
    { name: "ENTER THE GRID", id: "123314320", creator: "btwmag" },
    { name: "Theque", id: "121266197", creator: "Firelia" },
    { name: "Specthys", id: "123501215", creator: "gBen" },
    { name: "Kumulonimbus", id: "122992192", creator: "NotDarpy" },
    { name: "THRU THE RED PLANET", id: "111077002", creator: "64x" },
    { name: "demon II", id: "122979017", creator: "Zodacx" },
    { name: "Koantaoh", id: "121727506", creator: "Szilu" },
    { name: "gear panic", id: "124340305", creator: "krenogd" },
    { name: "Solar Wind", id: "110028635", creator: "64x" },
    { name: "posion factory", id: "115324712", creator: "gergo123456" },
    { name: "Ohoo Highway", id: "124931788", creator: "Szilu" },
    { name: "Liminal Dystopia", id: "123726816", creator: "Pongix" },
    { name: "Manchester United", id: "116835676", creator: "Leves" },
    { name: "Blooming Haze", id: "125882496", creator: "gBen" },
    { name: "magyaroszaurusz", id: "126029753", creator: "trexhun" },
    { name: "Kamah", id: "125601191", creator: "NotDarpy" },
    { name: "mesmerize", id: "125762551", creator: "kreno" },
    { name: "birds i view", id: "126243788", creator: "kreno" },
    { name: "Treasure Isles", id: "126562348", creator: "NotDarpy" },
    { name: "Overworld", id: "124021936", creator: "semi42" },
    { name: "make or break", id: "126837424", creator: "mag" },
    { name: "like clockwork", id: "118993504", creator: "kreno" },
    { name: "isolate", id: "126969756", creator: "kreno" },
    { name: "1 egy almafa", id: "126979132", creator: "semi42" },
    { name: "Aeoff", id: "127217779", creator: "Szilu" },
    { name: "NEONDREAMS", id: "127375147", creator: "KMJFIRE" },
    { name: "INTERVAL", id: "127523283", creator: "KMJFIRE" },
    { name: "Fallen Sanctuary", id: "127577051", creator: "mag" },
    { name: "Orb Bypass", id: "127703785", creator: "kreno" },
    { name: "SKYLANE", id: "127777522", creator: "KMJFIRE" },
    { name: "AYY LMAO", id: "127943318", creator: "kreno" },
    { name: "distant", id: "128163607", creator: "kreno" }
];

const HUNGARIAN_PLAYERS = [...new Set(RAW_PLAYERS)]; 
const HUNGARIAN_LEVELS = HUNGARIAN_LEVELS_UNSORTED; 
const API_BASE = "https://gdbrowser.com/api/profile";
const MODERATORS = ["kreno", "mag"];

// --- Konfigurációk ---
const categoryConfig = {
    stars: { 
        apiType: 'stars', 
        icon: '<img src="src/star.png" class="value-icon-img" alt="Stars">', 
        animColor: 'var(--color-stars)', 
        animIcon: '<img src="src/star.png" alt="Star">' 
    },
    hun_levels: { 
        apiType: 'levels', 
        icon: '<img src="src/safe.png" class="value-icon-img" alt="Levels">', 
        animColor: 'var(--color-levels)', 
        animIcon: '<img src="src/safe.png" alt="Level">' 
    },
    moons: { 
        apiType: 'moons', 
        icon: '<img src="src/moon.png" class="value-icon-img" alt="Moons">', 
        animColor: 'var(--color-moons)', 
        animIcon: '<img src="src/moon.png" alt="Moon">' 
    },
    diamonds: { 
        apiType: 'diamonds', 
        icon: '<img src="src/diamond.png" class="value-icon-img" alt="Diamonds">', 
        animColor: 'var(--color-diamonds)', 
        animIcon: '<img src="src/diamond.png" alt="Diamond">' 
    },
    usercoins: { 
        apiType: 'userCoins', 
        icon: '<img src="src/silvercoin.png" class="value-icon-img" alt="User Coins">', 
        animColor: 'var(--color-coins)', 
        animIcon: '<img src="src/silvercoin.png" alt="Coin">' 
    },
    demons: { 
        apiType: 'demons', 
        icon: '<img src="src/demon-hard.png" class="value-icon-img" alt="Demons">', 
        animColor: 'var(--color-demons)', 
        animIcon: '<img src="src/demon-hard.png" alt="Demon">' 
    },
    creator: { 
        apiType: 'cp', 
        icon: '<img src="src/creator_points.png" class="value-icon-img" alt="Creator Points">', 
        animColor: 'var(--color-creator)', 
        animIcon: '<img src="src/creator_points.png" alt="Hammer">' 
    }
};

let GLOBAL_PLAYER_DATA = null; 
let IS_FETCHING = false;
let currentCategoryType = 'stars';
let currentLevelPage = 0;
const levelsPerPage = 25;

let animationInterval;
const animContainer = document.getElementById('bg-animation-container');

// --- Animáció ---
function startBackgroundAnimation(category) {
    clearInterval(animationInterval);
    animContainer.innerHTML = '';
    const config = categoryConfig[category];
    if (!config) return;
    animationInterval = setInterval(() => { createFallingItem(config); }, 300);
}

function createFallingItem(config) {
    const item = document.createElement('div');
    item.classList.add('falling-item');
    item.innerHTML = config.animIcon;
    const left = Math.random() * 100;
    const duration = Math.random() * 5 + 5;
    const size = Math.random() * 20 + 20;
    item.style.left = `${left}%`;
    item.style.animationDuration = `${duration}s`;
    item.style.fontSize = `${size}px`;
    item.style.width = `${size}px`;
    item.style.color = config.animColor;
    animContainer.appendChild(item);
    setTimeout(() => { item.remove(); }, duration * 1000);
}

// --- Adatlekérés ---
async function fetchAllPlayers(playerList) {
    const batchSize = 15; 
    const delay = 1000; 
    let results = [];
    
    const refreshBtn = document.getElementById('force-refresh');
    if(refreshBtn) refreshBtn.disabled = true;
    
    for (let i = 0; i < playerList.length; i += batchSize) {
        const batch = playerList.slice(i, i + batchSize);
        updateLoadingText(`Adatok betöltése... (${i}/${playerList.length})`);
        
        const promises = batch.map(username => {
            const targetUrl = `${API_BASE}/${username}`;
            const proxyUrl = `https://corsproxy.io/?${encodeURIComponent(targetUrl)}`;

            return fetch(proxyUrl)
                .then(res => {
                    if(!res.ok) return null; 
                    return res.json();
                })
                .catch(err => null);
        });
        
        const batchResults = await Promise.all(promises);
        results = results.concat(batchResults);

        if (i + batchSize < playerList.length) {
            await new Promise(resolve => setTimeout(resolve, delay));
        }
    }
    
    if(refreshBtn) refreshBtn.disabled = false;
    return results.filter(p => p !== null);
}

function updateLoadingText(text) {
    document.querySelectorAll('.loading-container').forEach(div => {
        if(div.style.display === 'block') {
            div.innerHTML = `<i class="fas fa-circle-notch"></i> ${text}`;
        }
    });
}

function loadIconsGradually() {
    const images = document.querySelectorAll('.lazy-skin[data-src]');
    images.forEach((img, index) => {
        setTimeout(() => {
            const realUrl = img.getAttribute('data-src');
            if (realUrl) {
                img.src = realUrl; 
                img.removeAttribute('data-src');
            }
        }, index * 50); 
    });
}

// --- Játékos Kártya ---
function generatePlayerCard(player, rank, value, iconHtml, borderColor) {
    const isTopThree = rank <= 3;
    const cardClass = `player-card ${isTopThree ? 'top-three' : ''} ${isTopThree ? 'rank-' + rank : ''}`;
    const nameClass = isTopThree ? 'top-three' : '';
    
    const styleAttr = borderColor ? `style="border-color: ${borderColor}; box-shadow: 0 0 10px ${borderColor}30;"` : '';

    let trophyHtml = '';
    if (rank === 1) trophyHtml = '<i class="fas fa-trophy trophy-icon"></i>';
    else if (rank === 2 || rank === 3) trophyHtml = '<i class="fas fa-medal trophy-icon"></i>';

    const formattedValue = new Intl.NumberFormat('en-US').format(value || 0);

    const glowVal = player.glow ? 1 : 0;
    const rawUrl = `https://gdbrowser.com/icon/${player.username}?icon=${player.icon}&col1=${player.col1}&col2=${player.col2}&glow=${glowVal}`;
    const cachedUrl = `https://wsrv.nl/?url=${encodeURIComponent(rawUrl)}&output=png&t=${Date.now()}`;

    let badgesHtml = '<div class="card-badges">';
    if (MODERATORS.includes(player.username)) {
         badgesHtml += '<img src="src/mod.png" class="badge-icon" title="Moderator" alt="Mod">';
    }
    if (player.cp > 0) {
         badgesHtml += '<img src="src/creator_points.png" class="badge-icon" title="Creator" alt="CP">';
    }
    badgesHtml += '</div>';

    return `
        <div class="${cardClass}" ${styleAttr} onclick="openModal('${player.username}')">
            ${badgesHtml}
            <div class="player-rank">#${rank}</div>
            <div class="player-info">
                ${trophyHtml}
                <img src="https://gdbrowser.com/icon/1" 
                        data-src="${cachedUrl}" 
                        class="player-skin lazy-skin" 
                        alt="${player.username}"
                        onerror="this.onerror=null; this.src='https://gdbrowser.com/icon/1';">
                <span class="player-name ${nameClass}" title="${player.username}">${player.username}</span>
            </div>
            
            <div class="player-value">
                ${iconHtml}
                <span>${formattedValue}</span>
            </div>
        </div>
    `;
}

// --- Level Kártya (Szám és Ikon nélkül) ---
function generateLevelCard(level, rank) {
    return `
        <div class="player-card" onclick="window.open('https://gdbrowser.com/${level.id}', '_blank')">
            <div class="level-card-content">
                <div class="level-details">
                    <div class="level-name" title="${level.name}">${level.name}</div>
                    <div class="level-creator"><i class="fas fa-user-edit" style="font-size:0.7rem;"></i> ${level.creator}</div>
                </div>
            </div>
            <div class="level-id-chip">ID: ${level.id}</div>
        </div>
    `;
}


// --- Fő megjelenítő függvény ---
function renderPlayers(players, category, searchTerm = "") {
    const grid = document.getElementById(`grid-${category}`);
    if (!grid) return;

    grid.innerHTML = '';

    // --- SPECIÁLIS ESET: LEVELS (LAPOZÓS) ---
    if (category === 'hun_levels') {
        renderLevelPage(currentLevelPage, searchTerm);
        return;
    }

    // --- NORMÁL PLAYERS ESET ---
    let config = categoryConfig[category];
    let sortKey = config.apiType;
    let displayIcon = config.icon;
    let customColor = null;

    if (category === 'demons') {
        sortKey = 'demons'; 
        customColor = '#ff4040'; 
    }

    let sortedList = [...players].sort((a, b) => (b[sortKey] || 0) - (a[sortKey] || 0));

    let displayPlayers = sortedList.map((player, index) => ({
        ...player, 
        _realRank: index + 1 
    }));

    const cleanSearch = searchTerm ? searchTerm.trim().toLowerCase() : "";
    if (cleanSearch.length > 0) {
        displayPlayers = displayPlayers.filter(p => p.username.toLowerCase().includes(cleanSearch));
    } else {
        const limit = (category === 'creator') ? 40 : 50;
        displayPlayers = displayPlayers.slice(0, limit);
    }

    if (displayPlayers.length === 0) {
        grid.innerHTML = '<div style="grid-column: 1/-1; text-align:center; padding:20px; color: #888;">Nincs találat.</div>';
        return;
    }

    let htmlContent = '';
    displayPlayers.forEach((player) => {
        let val = player[sortKey];
        htmlContent += generatePlayerCard(player, player._realRank, val, displayIcon, customColor);
    });

    grid.innerHTML = htmlContent;
    loadIconsGradually();
}

// --- LEVEL LAPOZÁS ---
function renderLevelPage(pageIndex, searchTerm = "") {
    const grid = document.getElementById('grid-hun_levels');
    if (!grid) return;
    
    let displayLevels = HUNGARIAN_LEVELS;
    const cleanSearch = searchTerm.trim().toLowerCase();

    if (cleanSearch.length > 0) {
        displayLevels = displayLevels.filter(l => 
            l.name.toLowerCase().includes(cleanSearch) || 
            l.creator.toLowerCase().includes(cleanSearch) ||
            l.id.includes(cleanSearch)
        );
    }

    const totalPages = Math.ceil(displayLevels.length / levelsPerPage);
    
    if (pageIndex < 0) pageIndex = 0;
    if (pageIndex >= totalPages && totalPages > 0) pageIndex = totalPages - 1;
    currentLevelPage = pageIndex;

    const startIndex = pageIndex * levelsPerPage;
    const endIndex = startIndex + levelsPerPage;
    const pageItems = displayLevels.slice(startIndex, endIndex);

    if (pageItems.length === 0) {
        grid.innerHTML = '<div style="grid-column: 1/-1; text-align:center; padding:20px; color: #888;">Nincs találat.</div>';
        updatePaginationControls(0, 0);
        return;
    }

    let htmlContent = '';
    pageItems.forEach((lvl, index) => {
        const globalRank = startIndex + index + 1;
        htmlContent += generateLevelCard(lvl, globalRank);
    });
    grid.innerHTML = htmlContent;
    
    updatePaginationControls(currentLevelPage + 1, totalPages);
}

function updatePaginationControls(current, total) {
    const ids = ['top', 'bottom'];
    ids.forEach(pos => {
        const prevBtn = document.getElementById(`prev-page-${pos}`);
        const nextBtn = document.getElementById(`next-page-${pos}`);
        const indicator = document.getElementById(`page-indicator-${pos}`);
        const container = document.getElementById(`pagination-${pos}`);

        if (total <= 1) {
            container.style.display = 'none';
        } else {
            container.style.display = 'flex';
            indicator.innerText = `${current} / ${total}`;
            prevBtn.disabled = current <= 1;
            nextBtn.disabled = current >= total;
        }
    });
}

// Lapozó gomb eseménykezelők
['top', 'bottom'].forEach(pos => {
    document.getElementById(`prev-page-${pos}`).addEventListener('click', () => {
        renderLevelPage(currentLevelPage - 1, document.getElementById('player-search').value);
        window.scrollTo({ top: document.getElementById('hun_levels').offsetTop - 100, behavior: 'smooth' });
    });
    document.getElementById(`next-page-${pos}`).addEventListener('click', () => {
        renderLevelPage(currentLevelPage + 1, document.getElementById('player-search').value);
        window.scrollTo({ top: document.getElementById('hun_levels').offsetTop - 100, behavior: 'smooth' });
    });
});


// --- PÁLYÁK LEKÉRDEZÉSE (Player Modal) ---

async function loadUserLevels(playerID, containerID) {
    const container = document.getElementById(containerID);
    container.innerHTML = '<div style="text-align:center; padding:20px;"><i class="fas fa-circle-notch fa-spin"></i> Pályák betöltése...</div>';

    try {
        const targetUrl = `https://gdbrowser.com/api/search/*?user=${playerID}&page=0`;
        const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(targetUrl)}`;

        const response = await fetch(proxyUrl);
        const data = await response.json();

        if (!data.contents) throw new Error("Üres válasz a proxytól");
        
        let levels = [];
        try {
            levels = JSON.parse(data.contents);
        } catch(e) {
            if (data.contents == "-1") levels = [];
            else throw e;
        }

        if (!Array.isArray(levels) || levels.length === 0) {
             container.innerHTML = '<div style="text-align:center; padding:20px; color:#888;">Nincsenek találatok.</div>';
             return;
        }

        const ratedLevels = levels.filter(lvl => lvl.stars > 0);

        if (ratedLevels.length === 0) {
            container.innerHTML = '<div style="text-align:center; padding:20px; color:#888;">Ennek a játékosnak nincsenek rated pályái (az első oldalon).</div>';
            return;
        }

        let html = '<div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">';
        
        ratedLevels.forEach(level => {
            let fileName = 'na';
            if (level.auto) fileName = 'auto';
            else if (level.demon) fileName = 'demon-hard'; 
            else fileName = level.difficulty.toLowerCase();
            
            const diffIcon = `https://gdbrowser.com/assets/difficultyFaces/${fileName}.png`;
            
            html += `
                <div style="background: rgba(0,0,0,0.3); border: 1px solid #444; padding: 15px; border-radius: 12px; display: flex; align-items: center; justify-content: space-between; transition: background 0.3s;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="text-align: center; width: 50px;">
                             <img src="${diffIcon}" style="width: 40px; height: 40px; object-fit: contain;" onerror="this.src='https://gdbrowser.com/assets/difficultyFaces/na.png'">
                             <div style="font-size: 0.8rem; margin-top: 5px; color: #ffd700; font-weight: bold;">${level.stars} <i class="fas fa-star"></i></div>
                        </div>
                        
                        <div>
                            <h4 style="margin: 0; color: white; font-weight: bold; font-size: 1.1rem;">${level.name}</h4>
                            <div style="font-size: 0.85rem; color: #aaa; margin-top: 4px;">
                                ID: <span style="color:white;">${level.id}</span> 
                                <span style="margin: 0 8px;">|</span> 
                                <i class="fas fa-download"></i> ${new Intl.NumberFormat().format(level.downloads)}
                                <span style="margin: 0 8px;">|</span> 
                                <i class="fas fa-thumbs-up"></i> ${new Intl.NumberFormat().format(level.likes)}
                            </div>
                        </div>
                    </div>
                    <a href="https://gdbrowser.com/${level.id}" target="_blank" style="color: var(--gold); text-decoration: none; font-size: 1.2rem; padding: 10px;">
                        <i class="fas fa-external-link-alt"></i>
                    </a>
                </div>
            `;
        });
        
        html += '</div>';
        container.innerHTML = html;

    } catch (error) {
        console.error(error);
        container.innerHTML = '<div style="text-align:center; padding:20px; color:#ff5555;">Hiba a pályák betöltésekor (Szerver hiba).</div>';
    }
}

// --- MODÁLIS ABLAK KEZELÉSE ---

function openModal(username) {
    const playerData = GLOBAL_PLAYER_DATA.find(p => p.username === username);
    if (!playerData) return;

    const modalBody = document.getElementById('modal-body');
    
    const getIconUrl = (formName, iconIndex) => {
        const glowVal = playerData.glow ? 1 : 0;
        const rawUrl = `https://gdbrowser.com/icon/${playerData.username}?form=${formName}&icon=${iconIndex}&col1=${playerData.col1}&col2=${playerData.col2}&glow=${glowVal}`;
        return `https://wsrv.nl/?url=${encodeURIComponent(rawUrl)}&output=png&t=${Date.now()}&n=-1`;
    };
    
    const mainIconUrl = getIconUrl('icon', playerData.icon);

    const vehiclesArr = [
        { name: 'Cube', form: 'icon', prop: 'icon' },
        { name: 'Ship', form: 'ship', prop: 'ship' },
        { name: 'Ball', form: 'ball', prop: 'ball' },
        { name: 'UFO', form: 'ufo', prop: 'ufo' },
        { name: 'Wave', form: 'wave', prop: 'wave' },
        { name: 'Robot', form: 'robot', prop: 'robot' },
        { name: 'Spider', form: 'spider', prop: 'spider' },
        { name: 'Swing', form: 'swing', prop: 'swing' },
        { name: 'Jetpack', form: 'jetpack', prop: 'jetpack' }
    ];

    let socialLinksHtml = '';
    if (playerData.youtube) {
        const ytUrl = playerData.youtube.startsWith('UC') 
            ? `https://www.youtube.com/channel/${playerData.youtube}` 
            : `https://www.youtube.com/@${playerData.youtube}`;
            
        socialLinksHtml += `
            <a href="${ytUrl}" target="_blank" class="social-link" title="YouTube Channel">
                <img src="src/youtube.png" alt="YouTube" class="social-icon-img">
            </a>`;
    }
    if (playerData.twitch) {
        socialLinksHtml += `
            <a href="https://www.twitch.tv/${playerData.twitch}" target="_blank" class="social-link" title="Twitch Stream">
                <img src="src/twitch.png" alt="Twitch" class="social-icon-img">
            </a>`;
    }

    let nameBadges = '';
    if (MODERATORS.includes(playerData.username)) {
        nameBadges += '<img src="src/mod.png" class="modal-badge" title="Moderator" alt="Mod">';
    }
    if (playerData.cp > 0) {
        nameBadges += '<img src="src/creator_points.png" class="modal-badge" title="Creator" alt="CP">';
    }

    modalBody.innerHTML = `
        <div class="modal-header-user">
            <img src="${mainIconUrl}" alt="${playerData.username}" class="modal-main-icon">
            <div style="flex-grow:1;">
                <h2 class="modal-username">${playerData.username} ${nameBadges}</h2>
                
                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <button onclick="switchTab('stats')" class="btn btn-sm btn-outline-warning active" id="btn-stats"><i class="fas fa-chart-bar"></i> Stats & Icons</button>
                    <button onclick="switchTab('levels', '${playerData.playerID}')" class="btn btn-sm btn-outline-warning" id="btn-levels"><i class="fas fa-layer-group"></i> Rated Levels</button>
                </div>
            </div>
        </div>

        <div id="tab-stats" style="display: block;">
            <div class="modal-subtitle"><i class="fas fa-info-circle me-2"></i>Statistics</div>
            <div class="modal-stats-grid">
                <div class="modal-stat-item" style="color: var(--color-stars);"><img src="src/star.png" class="value-icon-img"> ${new Intl.NumberFormat().format(playerData.stars)} Stars</div>
                <div class="modal-stat-item" style="color: var(--color-moons);"><img src="src/moon.png" class="value-icon-img"> ${new Intl.NumberFormat().format(playerData.moons)} Moons</div>
                <div class="modal-stat-item" style="color: var(--color-diamonds);"><img src="src/diamond.png" class="value-icon-img"> ${new Intl.NumberFormat().format(playerData.diamonds)} Diamonds</div>
                <div class="modal-stat-item" style="color: var(--color-coins);"><img src="src/silvercoin.png" class="value-icon-img"> ${new Intl.NumberFormat().format(playerData.userCoins)} User Coins</div>
                <div class="modal-stat-item" style="color: var(--color-demons);"><img src="src/demon-hard.png" class="value-icon-img"> ${new Intl.NumberFormat().format(playerData.demons)} Demons</div>
                <div class="modal-stat-item" style="color: var(--color-creator);"><img src="src/creator_points.png" class="value-icon-img"> ${new Intl.NumberFormat().format(playerData.cp)} Creator Points</div>
            </div>

            <div class="modal-icons-container">
                 <div class="modal-subtitle"><i class="fas fa-shapes me-2"></i>Icon Set</div>
                 <div class="icon-set-row">
                    ${vehiclesArr.map(v => `
                        <div class="icon-set-item" title="${v.name}">
                            <img src="${getIconUrl(v.form, playerData[v.prop])}" alt="${v.name}">
                            <span class="icon-label">${v.name}</span>
                        </div>
                    `).join('')}
                 </div>
            </div>
            
            <div class="modal-socials">
                 ${socialLinksHtml}
            </div>
        </div>

        <div id="tab-levels" style="display: none;">
            <div class="modal-subtitle"><i class="fas fa-star me-2"></i>Created Levels (Rated)</div>
            <div id="levels-container"></div>
        </div>
    `;

    document.getElementById('profile-modal').style.display = 'flex';
    document.body.classList.add('modal-open');
}

window.switchTab = function(tabName, playerID = null) {
    document.getElementById('tab-stats').style.display = (tabName === 'stats') ? 'block' : 'none';
    document.getElementById('tab-levels').style.display = (tabName === 'levels') ? 'block' : 'none';
    
    document.getElementById('btn-stats').classList.toggle('active', tabName === 'stats');
    document.getElementById('btn-levels').classList.toggle('active', tabName === 'levels');

    if (tabName === 'levels' && playerID) {
        const container = document.getElementById('levels-container');
        if (container.innerHTML === '') {
            loadUserLevels(playerID, 'levels-container');
        }
    }
}

// --- Eseménykezelők és Inicializálás ---

async function handleCategoryChange(category) {
    currentCategoryType = category;
    
    const grid = document.getElementById(`grid-${category}`);
    const loading = document.getElementById(`loading-${category}`);
    const searchInput = document.getElementById('player-search');

    if(loading) loading.style.display = 'block';
    
    try {
        if (category === 'hun_levels') {
             if(loading) loading.style.display = 'none';
             // Reset to page 0 on category switch
             currentLevelPage = 0;
             renderPlayers([], category, searchInput ? searchInput.value : "");
             return;
        }

        if (!GLOBAL_PLAYER_DATA) {
            if (!IS_FETCHING) {
                IS_FETCHING = true;
                const data = await fetchAllPlayers(HUNGARIAN_PLAYERS);
                if (data.length === 0) throw new Error("Üres lista jött vissza");
                GLOBAL_PLAYER_DATA = data;
                IS_FETCHING = false;
            } else {
                while(IS_FETCHING) await new Promise(r => setTimeout(r, 500));
            }
        }

        if(GLOBAL_PLAYER_DATA && GLOBAL_PLAYER_DATA.length > 0) {
            const currentSearchTerm = searchInput ? searchInput.value.trim() : "";
            renderPlayers(GLOBAL_PLAYER_DATA, category, currentSearchTerm);
        }

    } catch (error) {
        console.error(error);
        if(grid) {
            grid.innerHTML = `
                <div class="error-msg">
                    Hiba történt az adatok lekérésekor.<br>
                    <small>${error.message}</small><br>
                    <button class="retry-btn" onclick="retryFetch()">Újrapróbálkozás</button>
                </div>`;
        }
    } finally {
        if(loading) loading.style.display = 'none';
    }
}

function retryFetch() {
    handleCategoryChange(currentCategoryType);
}

function forceRefresh() {
    if(IS_FETCHING) return; 
    
    if(confirm("Biztos, hogy újraszeretnéd tölteni az összes adatot? Ez eltarthat néhány percig.")) {
        GLOBAL_PLAYER_DATA = null;
        const grids = document.querySelectorAll('.player-grid');
        grids.forEach(g => g.innerHTML = '');
        handleCategoryChange(currentCategoryType);
    }
}

document.getElementById('player-search').addEventListener('input', function(e) {
    const searchTerm = e.target.value;
    if (currentCategoryType === 'hun_levels') {
        currentLevelPage = 0; 
        renderPlayers([], 'hun_levels', searchTerm);
    } else if (GLOBAL_PLAYER_DATA) {
        renderPlayers(GLOBAL_PLAYER_DATA, currentCategoryType, searchTerm);
    }
});

document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        this.classList.add('active');

        document.querySelectorAll('.category-section').forEach(section => {
            section.classList.remove('active');
        });
        
        const category = this.getAttribute('data-category');
        const targetSection = document.getElementById(category);
        if (targetSection) targetSection.classList.add('active');

        startBackgroundAnimation(category);
        handleCategoryChange(category);
    });
});

window.addEventListener('load', function() {
    document.body.style.opacity = '0';
    setTimeout(() => {
        document.body.style.transition = 'opacity 0.5s';
        document.body.style.opacity = '1';
    }, 100);

    startBackgroundAnimation('stars');
    handleCategoryChange('stars');
});

function closeModal() {
    document.getElementById('profile-modal').style.display = 'none';
    document.body.classList.remove('modal-open');
}

document.getElementById('profile-modal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeModal();
    }
});
    </script>
</body>
</html>